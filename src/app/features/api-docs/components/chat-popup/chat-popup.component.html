<div class="chat-bubble" (click)="toggleChat()">
  <img src="../../../../../assets/image/chat-icon.png" class="chat-img">
  <span class="chat-icon" [ngClass]="{'active': showChat}"></span>

  <div class="chat-popup" *ngIf="showChat" (click)="$event.stopPropagation()" @fadeSlide>
    <button class="clear-history-button" (click)="clearChatHistory()" title="Borrar historial"></button>
    <div class="chat-messages">
      <div *ngFor="let m of messages" [ngClass]="{ 'user-message': m.isUser, 'bot-message': !m.isUser }">
        <div [innerHTML]="m.text"></div>
      </div>
    </div>
    <div class="chat-input">
      <input #inputRef [(ngModel)]="inputMessage" (keydown.enter)="sendMessage()" [disabled]="loading"
        placeholder="Escribe un mensaje...">
      <button (click)="sendMessage()" [disabled]="loading">Enviar</button>
    </div>
  </div>
  <span class="chat-popup-punta" *ngIf="showChat"></span>
</div>
